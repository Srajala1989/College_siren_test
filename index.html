<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPW Holenarasipura | Siren Admin</title>
    
    <style>
        /* BASE STYLES - Works without external links */
        body { 
            background-color: #f1f5f9; 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0; 
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        header { 
            background: white; 
            padding: 15px 25px; 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            border-bottom: 2px solid #e2e8f0;
        }
        .logo-box {
            width: 60px; height: 60px; 
            border: 1px solid #ddd; 
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
        }
        .college-name {
            font-size: 20px; font-weight: 900; color: #1e293b; margin: 0; text-transform: uppercase;
        }
        .subtitle {
            font-size: 12px; color: #2563eb; margin: 5px 0 0 0; font-weight: bold; letter-spacing: 1px;
        }
        .container {
            display: flex; justify-content: center; align-items: center; flex: 1;
        }
        .login-card {
            background: white; padding: 40px; border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 400px;
            text-align: center;
        }
        input {
            width: 100%; padding: 12px; margin: 10px 0;
            border: 1px solid #cbd5e1; border-radius: 8px; box-sizing: border-box;
            background: #f8fafc;
        }
        button {
            width: 100%; padding: 14px; background: #1d4ed8; color: white;
            border: none; border-radius: 8px; font-weight: bold; cursor: pointer;
            font-size: 16px; margin-top: 10px;
        }
        button:hover { background: #1e40af; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <div class="logo-box">
            <img src="logo.png" alt="Logo" style="max-width:90%; max-height:90%;" onerror="this.src='https://via.placeholder.com/50'">
        </div>
        <div>
            <p class="college-name">Govt. Polytechnic For Women Holenarasipura</p>
            <p class="subtitle">Automatic Siren Management System</p>
        </div>
    </header>

    <div class="container">
        <div id="loginSection" class="login-card">
            <h2 style="margin-top:0;">Admin Login</h2>
            <input type="email" id="email" placeholder="Enter Email">
            <input type="password" id="password" placeholder="Enter Password">
            <button id="loginBtn">Sign In</button>
        </div>

        <div id="dashboardSection" class="login-card hidden">
            <h3>Siren Control</h3>
            <button id="sirenBtn" style="height:150px; width:150px; border-radius:50%; background:red; font-size:20px;">RING SIREN</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDpdIb1KL0z8ha5dEsKopwbSokE7jCxt68", 
            authDomain: "websirentest.firebaseapp.com",
            databaseURL: "https://websirentest-default-rtdb.firebaseio.com",
            projectId: "websirentest",
            storageBucket: "websirentest.appspot.com",
            appId: "1:223793739773:web:651543788764020a324911"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        document.getElementById('loginBtn').onclick = () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            auth.signInWithEmailAndPassword(email, pass)
                .then(() => {
                    document.getElementById('loginSection').classList.add('hidden');
                    document.getElementById('dashboardSection').classList.remove('hidden');
                })
                .catch(err => alert(err.message));
        };

        document.getElementById('sirenBtn').onclick = () => {
            db.ref('siren_system/manual_trigger').set({
                status: true,
                timestamp: Date.now()
            }).then(() => {
                alert("Signal Sent!");
                setTimeout(() => db.ref('siren_system/manual_trigger/status').set(false), 2000);
            });
        };
    </script>
</body>
</html>
